<!DOCTYPE html>
<html lang="he" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>专+ -   专</title>
    <link rel="icon" type="image/x-icon" href="./favicon.ico">
    <link rel="stylesheet" href="index.css">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Hebrew:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>

<body>
    <div class="container">
        <!-- Header Section -->
        <header class="main-header">
            <!-- <div class="logo-container">
                <img class="logo" src="./1687348105683.png" alt="专+ ">
            </div> -->
            <h1 class="site-title">专+</h1>
            <p class="site-subtitle"> 转拽  专 拽专 转"</p>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Search Section -->
            <section class="search-section">
                <div class="search-container">
                    <div class="input-group">
                        <input type="text" id="chars" placeholder="住    驻砖..." class="search-input">
                        <button class="search-button" id="searchBtn" onclick="performSearch()">
                            <span class="search-icon"></span>
                            <span class="search-text">驻砖</span>
                        </button>
                    </div>
                    <p class="search-hint">抓 Enter  注 驻转专 驻砖  转</p>
                </div>
            </section>

            <!-- Source Selection -->
            <section class="source-section">
                <h2 class="section-title">专 拽专</h2>
                <div class="button-grid source-grid">
                    <button class="source-btn active" id="btn1" onclick="setSource(1)">
                        <span class="btn-icon"></span>
                        <span class="btn-text">转专</span>
                    </button>
                    <button class="source-btn" id="btn2" onclick="setSource(2)">
                        <span class="btn-icon"></span>
                        <span class="btn-text"></span>
                    </button>
                    <button class="source-btn" id="btn3" onclick="setSource(3)">
                        <span class="btn-icon"></span>
                        <span class="btn-text">转</span>
                    </button>
                </div>
            </section>

            <!-- Search Options -->
            <section class="options-section">
                <h2 class="section-title">专 住 驻砖</h2>
                <div class="button-grid options-grid">
                    <button class="option-btn active" id="hedderBtn1" onclick="setOption(1)">
                        <span class="btn-icon"></span>
                        <span class="btn-text">专</span>
                    </button>
                    <button class="option-btn" id="hedderBtn2" onclick="setOption(2)">
                        <span class="btn-icon"></span>
                        <span class="btn-text"></span>
                    </button>
                    <button class="option-btn" id="hedderBtn3" onclick="setOption(3)">
                        <span class="btn-icon"></span>
                        <span class="btn-text">砖转 砖</span>
                    </button>
                    <button class="option-btn" id="hedderBtn4" onclick="setOption(4)">
                        <span class="btn-icon"></span>
                        <span class="btn-text">专砖 转转</span>
                    </button>
                    <button class="option-btn" id="hedderBtn5" onclick="setOption(5)">
                        <span class="btn-icon"></span>
                        <span class="btn-text">住驻 转转</span>
                    </button>
                </div>
            </section>

            <!-- Results Section -->
            <section class="results-section">
                <!-- Gematria Value Display -->
                <div class="gematria-display" id="gematriaDisplay">
                    <div class="gematria-value">
                        <span class="value-label">注专 专:</span>
                        <span class="value-number" id="sum">-</span>
                    </div>
                </div>

                <!-- History Section -->
                <div class="history-section hide" id="historySection">
                    <h3 class="history-title"> 转 住专:</h3>
                    <div class="history-content" id="history">  住专</div>
                </div>

                <!-- Results Table -->
                <div class="results-container">
                    <div class="table-wrapper">
                        <table class="results-table" id="table">
                            <thead>
                                <tr>
                                    <th class="col-number">#</th>
                                    <th class="col-source">拽专</th>
                                    <th class="col-content" id="subject">转</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr class="no-results">
                                    <td>1</td>
                                    <td> 拽专转</td>
                                    <td class="pesukim"> 驻住拽</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>
        </main>

        <!-- Footer -->
        <footer class="main-footer">
            <p>专+ -   专 拽专 转"</p>
        </footer>
    </div>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-spinner">
            <div class="spinner"></div>
            <p>驻砖...</p>
        </div>
    </div>

    <!-- Core scripts loaded immediately -->
    <script src="configuration.js"></script>
    <script src="index.js"></script>
    
    <!-- Torah data loaded immediately (default source) -->
    <script src="gem-tora.js"></script>
    <script src="gem-tora-source.js"></script>
    <script src="gem-roshei.js"></script>
    <script src="gem-sofei.js"></script>
    
    <!-- Other sources loaded asynchronously -->
    <script>
        // Global variables to track loading state
        window.dataLoaded = {
            tora: false,
            nevihim: false,
            cetuvim: false
        };
        
        // Initialize with Torah data
        document.addEventListener('DOMContentLoaded', function() {
            window.dataLoaded.tora = true;
        });
        
        // Function to load data files asynchronously
        function loadScriptAsync(src, onLoad) {
            return new Promise((resolve, reject) => {
                const script = document.createElement('script');
                script.src = src;
                script.onload = () => {
                    if (onLoad) onLoad();
                    resolve();
                };
                script.onerror = reject;
                document.head.appendChild(script);
            });
        }
        
        // Load Nevi'im data when needed
        async function loadNevihimData() {
            if (window.dataLoaded.nevihim) return;
            
            showNotification('注 转 ...', 'info');
            try {
                await loadScriptAsync('gem-nevihim.js');
                await loadScriptAsync('gem-nevihim-source.js');
                window.dataLoaded.nevihim = true;
                showNotification('转  注 爪', 'success');
            } catch (error) {
                console.error('Failed to load Nevi\'im data:', error);
                showNotification('砖 注转 转 ', 'error');
            }
        }
        
        // Load Ketuvim data when needed
        async function loadCetuvimData() {
            if (window.dataLoaded.cetuvim) return;
            
            showNotification('注 转 转...', 'info');
            try {
                await loadScriptAsync('gem-cetuvim.js');
                await loadScriptAsync('gem-cetuvim-source.js');
                window.dataLoaded.cetuvim = true;
                showNotification('转 转 注 爪', 'success');
            } catch (error) {
                console.error('Failed to load Ketuvim data:', error);
                showNotification('砖 注转 转 转', 'error');
            }
        }
        
        // Override setSource to load data on demand
        const originalSetSource = window.setSource;
        window.setSource = function(value) {
            // Load data if needed
            if (value === 2 && !window.dataLoaded.nevihim) {
                loadNevihimData();
            } else if (value === 3 && !window.dataLoaded.cetuvim) {
                loadCetuvimData();
            }
            
            // Call original function
            originalSetSource(value);
        };
        
        // Preload data on hover for better UX
        document.addEventListener('DOMContentLoaded', function() {
            const btn2 = document.getElementById('btn2');
            const btn3 = document.getElementById('btn3');
            
            // Preload Nevi'im data on hover
            btn2.addEventListener('mouseenter', function() {
                if (!window.dataLoaded.nevihim) {
                    loadNevihimData();
                }
            });
            
            // Preload Ketuvim data on hover
            btn3.addEventListener('mouseenter', function() {
                if (!window.dataLoaded.cetuvim) {
                    loadCetuvimData();
                }
            });
        });
    </script>
</body>

</html>

